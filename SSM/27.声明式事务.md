# 声明式事务

## 编程式事务

事务功能的相关操作全部通过自己编写代码来实现：

```java
	Connection conn = ...;

	try {
		// 开启事务：关闭事务的自动提交
		conn.setAutoCommit(false);

		// 核心操作

		// 提交事务
		conn.commit();
	} catch(Exception e){
		// 回滚事务
		conn.rollBack();
	} finally{
        // 释放数据库连接
		conn.close();
	}
```

编程式的实现方式存在缺陷：

- 细节没有被屏蔽：具体操作过程中，所有细节都需要程序员自己来完成，比较繁琐
- 代码复用性不高：如果没有有效抽取出来，每次实现功能都需要自己编写代码，代码就没有得到复用

## 声明式事务

既然事务控制的代码有规律可循，**代码的结构基本是确定的**，所以框架就可以**将固定模式的代码抽取**出来，进行相关的封装

封装起来后，我们只需要在配置文件中进行简单的配置即可完成操作

- 好处1：提高开发效率
- 好处2：消除了冗余的代码
- 好处3：框架会综合考虑相关领域中在实际开发环境下有可能遇到的各种问题，进行了健壮性、性能等各个方面的优化

**两者的区别**

- 编程式：**自己写代码**实现功能
- 声明式：**通过配置**让框架实现功能