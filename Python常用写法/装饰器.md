# 装饰器

```python
from tkinter import messagebox
import time


# 自定义异常类
class CustomException(Exception):
    def __init__(self, message="运行出现异常"):
        self.message = message
        super().__init__(self.message)


# 代理函数，捕捉异常
def catch_custom_exception(func):
    def wrapper(*args, **kwargs):
        try:
            return func(*args, **kwargs)
        except CustomException as e:
            messagebox.showerror(f"发生错误", f"{e}")
        except Exception as e:
            messagebox.showerror(f"发生未知错误", f"{e}")
    return wrapper


# 代理函数，捕捉类方法异常
def catch_custom_exception(func):
    def wrapper(self, *args, **kwargs):
        try:
            return func(self, *args, **kwargs)
        except CustomException as e:
            messagebox.showerror("发生错误", f"{e}")
        except Exception as e:
            messagebox.showerror("发生未知错误", f"{e}")
    return wrapper


# 计算函数运行时间
def calculate_time(func):
    def wrapper(*args, **kwargs):
        start_time = time.time()
        result = func(*args, **kwargs)
        end_time = time.time()
        print(f"函数 {func.__name__} 运行时间为: {end_time - start_time:.4f} 秒")
        return result
    return wrapper
```

